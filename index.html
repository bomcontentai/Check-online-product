<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lotus's Image Probe Checker</title>

<style>
body {
    background: linear-gradient(135deg, #eef7f1 0%, #f7fbf8 100%);
    font-family: 'Prompt', sans-serif;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    padding: 20px;
    color: #2e3a2f;
}
.container {
    background: #ffffff;
    border-radius: 20px;
    padding: 30px;
    width: 100%;
    max-width: 900px;
}
textarea {
    width: 100%;
    min-height: 130px;
    border-radius: 12px;
    padding: 15px;
    border: 1px solid #cfd8dc;
}
button {
    margin-top: 15px;
    padding: 12px 30px;
    border-radius: 25px;
    border: none;
    background: #81c784;
    font-weight: bold;
    cursor: pointer;
}
.product-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px,1fr));
    gap: 15px;
    margin-top: 15px;
}
.product-card {
    background: #f1f8e9;
    border-radius: 12px;
    padding: 15px;
    text-align: center;
}
.product-card img {
    width: 100%;
    max-height: 140px;
    object-fit: contain;
    margin-bottom: 8px;
}
.invalid-box {
    margin-top: 20px;
    background: #ffebee;
    padding: 15px;
    border-radius: 12px;
}
a { color: #2e7d32; }
.note {
    font-size: 13px;
    opacity: 0.85;
    margin-top: 10px;
}
</style>
</head>

<body>
<div class="container">
    <h1>üõí Lotus's Image Probe Checker</h1>
    <p>‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡∏Ñ‡∏±‡πà‡∏ô‡∏î‡πâ‡∏ß‡∏¢ Enter / , / ‡πÄ‡∏ß‡πâ‡∏ô‡∏ß‡∏£‡∏£‡∏Ñ)</p>

    <textarea id="input"></textarea>
    <button onclick="search()">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</button>

    <div id="status" style="margin-top:15px;"></div>

    <h3 style="margin-top:30px;">‚úÖ ‡∏û‡∏ö‡∏£‡∏π‡∏õ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
    <div class="product-grid" id="valid"></div>

    <div id="invalidBox" class="invalid-box" style="display:none;">
        <h3>‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏π‡∏õ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
        <div id="invalidList"></div>
    </div>

    <div class="note">
        * ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ö‡∏ô CDN ‡∏Ç‡∏≠‡∏á Lotus‚Äôs ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á  
        ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏£‡∏π‡∏õ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 path ‡∏à‡∏∞‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡∏û‡∏ö
    </div>
</div>

<script>
function search() {
    const input = document.getElementById('input').value;
    const validGrid = document.getElementById('valid');
    const invalidBox = document.getElementById('invalidBox');
    const invalidList = document.getElementById('invalidList');
    const status = document.getElementById('status');

    validGrid.innerHTML = '';
    invalidList.innerHTML = '';
    invalidBox.style.display = 'none';

    const ids = [...new Set(
        input.split(/[\s,]+/)
        .map(t => t.trim())
        .filter(t => /^\d+$/.test(t))
    )];

    // üîë ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢ (‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏î‡πâ‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á)
    const FOLDERS = [
        '86593',
        '86594',
        '86595',
        '86596'
    ];

    let found = [];
    let notFound = [];
    let checked = 0;

    ids.forEach(id => {
        let resolved = false;
        let tried = 0;

        FOLDERS.forEach(folder => {
            const imgUrl = `https://o2o-static.lotuss.com/products/${folder}/${id}.jpg`;
            const img = new Image();
            img.src = imgUrl;

            img.onload = () => {
                if (resolved) return;
                resolved = true;
                found.push(id);
                validGrid.innerHTML += `
                    <div class="product-card">
                        <img src="${imgUrl}">
                        <strong>${id}</strong><br>
                        <a href="https://www.lotuss.com/th/product/${id}" target="_blank">
                            ‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
                        </a>
                    </div>
                `;
                done();
            };

            img.onerror = () => {
                tried++;
                if (tried === FOLDERS.length && !resolved) {
                    notFound.push(id);
                    done();
                }
            };
        });
    });

    function done() {
        checked++;
        if (checked === ids.length) {
            if (notFound.length > 0) {
                invalidBox.style.display = 'block';
                invalidList.innerText = notFound.join(', ');
            }
            status.innerText =
                `‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ${found.length} | ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ${notFound.length}`;
        }
    }
}
</script>
</body>
</html>
